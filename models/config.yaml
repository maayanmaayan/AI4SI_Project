# Model Configuration Template
# Copy this to config.yaml and adjust as needed

model:
  name: "ft_transformer"
  d_token: 128
  n_layers: 3
  n_heads: 4
  dropout: 0.1
  activation: "gelu"

training:
  batch_size: 64
  learning_rate: 0.001
  weight_decay: 0.0001
  num_epochs: 100
  early_stopping_patience: 10
  early_stopping_min_delta: 0.001

loss:
  type: "distance_based"  # distance_based, hybrid, or classification
  distance_weight: 1.0
  classification_weight: 0.5
  normalize_by_15min: true  # Normalize distances by 15-minute walk distance (~1.2 km)
  use_network_distance: true  # Use OSMnx network distance, not Euclidean

data:
  train_split: 0.7
  val_split: 0.15
  test_split: 0.15
  random_seed: 42
  train_only_on_compliant: true  # Critical: train only on compliant neighborhoods

evaluation:
  statistical_test: "mann_whitney"  # ttest or mann_whitney
  significance_level: 0.05
  min_samples_for_test: 10

paths:
  data_root: "./data"
  neighborhoods_geojson: "./paris_neighborhoods.geojson"
  checkpoints_dir: "./models/checkpoints"
  experiments_dir: "./experiments/runs"

osm_extraction:
  buffer_meters: 100  # Buffer around neighborhood boundaries
  network_type: "walk"  # 'walk', 'drive', 'bike', 'all'
  simplify: true  # Simplify network geometry
  cache_results: true  # Skip if data already exists
  retry_attempts: 3  # Number of retries on failure
  retry_delay: 5  # Seconds between retries
  min_services_warning: 5  # Warn if fewer services found
